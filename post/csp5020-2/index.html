<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>csp5020-2 | wYYSZL 的博客</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://wyyszl.github.io/favicon.ico?v=1611225954675">
<link rel="stylesheet" href="https://wyyszl.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="csp-j
t1
#include&lt;bits/stdc++.h&gt;

using namespace std;
int i;
int n;
bool b[128];
inline void ini(int a){
	for(i=1..." />
    <meta name="keywords" content="OI" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://wyyszl.github.io">
        <img src="https://wyyszl.github.io/images/avatar.png?v=1611225954675" class="site-logo">
        <h1 class="site-title">wYYSZL 的博客</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      祝大家 csp ++score and  ++rp！
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/wYYSZL/wyyszl.github.io">wYYSZL</a> | <a class="rss" href="https://wyyszl.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">csp5020-2</h2>
            <div class="post-date">2021-01-19</div>
            
            <div class="post-content" v-pre>
              <h1 id="csp-j">csp-j</h1>
<h2 id="t1">t1</h2>
<pre><code>#include&lt;bits/stdc++.h&gt;

using namespace std;
int i;
int n;
bool b[128];
inline void ini(int a){
	for(i=1;a;++i){
		b[i]=a%2;
		a&gt;&gt;=1;
	}
	return ;
}
int main(){
//	freopen(&quot;power.in&quot;,&quot;r&quot;,stdin);
//	freopen(&quot;power.out&quot;,&quot;w&quot;,stdout);
	cin&gt;&gt;n;
	ini(n);
	if(b[1]){
		cout&lt;&lt;-1;
		return 0;
	}
	for(;i;--i){
		if(b[i])cout&lt;&lt;(int)pow(2,i-1)&lt;&lt;' ';
	}
	return 0;
}




</code></pre>
<h2 id="t2">t2</h2>
<h3 id="1">1</h3>
<pre><code>#include&lt;bits/stdc++.h&gt;

using namespace std;
int n,last,l;
int w;
priority_queue&lt;int&gt;dl2;
priority_queue&lt;int,vector&lt;int&gt;,greater&lt;int&gt; &gt;dl1;
int main(){
//	freopen(&quot;live.in&quot;,&quot;r&quot;,stdin);
//	freopen(&quot;live.out&quot;,&quot;w&quot;,stdout);
	cin&gt;&gt;n&gt;&gt;w;
	cin&gt;&gt;l;
	last=l;
	dl1.push(l);
	cout&lt;&lt;l&lt;&lt;' ';
	for(int i=2;i&lt;=n;++i){
		scanf(&quot;%d&quot;,&amp;l);
		if(l&lt;last)dl2.push(l);
		else dl1.push(l);
		if((int)dl1.size()&lt;max(1,(int)(i*w/100.0))){
			int u=dl2.top();
			dl2.pop();
			dl1.push(u);
			last=dl1.top();
		}
		if((int)dl1.size()&gt;max(1,(int)(i*w/100.0))){
			int u=dl1.top();
			dl1.pop();
			dl2.push(u);
			last=dl1.top();
		}
		cout&lt;&lt;last&lt;&lt;' ';
	}
	return 0;
}



</code></pre>
<h3 id="2">2</h3>
<pre><code>#include&lt;bits/stdc++.h&gt;

using namespace std;
int n,w;
int l;
struct Node {
	int l,r,sum;
} tree[2405];
void build(int t,int l,int r) {
	tree[t].l =l;
	tree[t].r =r;
	tree[t].sum =0;
	if(not(l-r))return ;
	int mid=(l+r)&gt;&gt;1;
	build(t*2,l,mid);
	build(t*2+1,mid+1,r);
	return;
}
void cnote(int t,int l){
	if(not(tree[t].l -tree[t].r )){
		++tree[t].sum;
		return ;
	}
	int mid=(tree[t].l +tree[t].r )&gt;&gt;1;
	if(l&lt;=mid)cnote(t*2,l);
	else cnote(t*2+1,l);
	++tree[t].sum ;
	return ;
}
int ask(int t,int l){
	if(not(tree[t].l -tree[t].r ))return tree[t].l ;
	if(tree[t*2+1].sum &gt;=l)return ask(t*2+1,l);
	else return ask(t*2,l-tree[t*2+1].sum );
}
int main() {
	ios::sync_with_stdio(0);
	cin&gt;&gt;n&gt;&gt;w;
	build(1,1,600);
	for(int i=1; i&lt;=n; ++i) {
		cin&gt;&gt;l;
		cnote(1,l);
		int asdf=max(1,i*w/100);
		cout&lt;&lt;ask(1,asdf)&lt;&lt;' ';
	}
	return 0;
}

</code></pre>
<h3 id="3">3</h3>
<pre><code>#include&lt;bits/stdc++.h&gt;
using namespace std;
int t[605];
int n,w;
int main()
{
	int x;
	cin&gt;&gt;n&gt;&gt;w;
	for(int i=1;i&lt;=n;i++)
	{
		cin&gt;&gt;x;
		t[x]++;
		int sum=0;
		for(int j=600;j&gt;=0;j--)
		{
			sum+=t[j];
			if(sum&gt;=max(1,i*w/100))
			{
				cout&lt;&lt;j&lt;&lt;' ';
				break;
			}
		}
	}
	return 0;
 } 
</code></pre>
<h2 id="t3">t3</h2>
<h3 id="赛时30pts">赛时（30pts）</h3>
<pre><code>#include&lt;bits/stdc++.h&gt;

using namespace std;
string s[100005];
int i;
int num;
int t[100005];
int len;
int l;
bool q[100005];
int z;
int  ans1,ans2;
int n;
int d[100005];
bool asdf;
stack&lt;int&gt;zh;
bool zjx[100005];
bool check(string s) {
	len=s.size();
	if(!s.size())return 1;
	for(int i=0; i&lt;len; ++i) {
		if(!(s[i]&gt;='0' &amp;&amp; s[i]&lt;='9'))return 1;
	}
	return 0;
}
int main() {
	q[100001]=1;
	q[100002]=0;
	while(++i,cin&gt;&gt;s[i],check(s[i])) {
		len=s[i].size();
		if(s[i]==&quot;&amp;&quot; || s[i]==&quot;|&quot;||s[i]==&quot;!&quot;) {
			char ch=s[i][0];
			switch(ch) {
				case'&amp;' : {
					t[++num]=-1;
					break;
				}
				case'|': {
					t[++num]=-2;
					break;
				}
				default: {
					t[++num]=-3;
					asdf=1;
					break;
				}
			}
		} else {
			l=0;
			for(int j=1; j&lt;len; ++j) {
				l*=10;
				l+=s[i][j]-'0';
			}
			t[++num]=l;
		}
	}
	for(int j=0; j&lt;s[i].size(); ++j) {
		n*=10;
		n+=s[i][j]-'0';
	}
	for(int i=1; i&lt;=n; ++i) {
		cin&gt;&gt;q[i];
	}
	for(int j=1; j&lt;=num; ++j) {
		if(t[j]&gt;0) {
			zh.push(t[j]);
		} else {
			if(t[j]&gt;=-2) {
				ans1=zh.top();
				zh.pop();
				ans2=zh.top();
				zh.pop();
			} else {
				ans1=zh.top();
				zh.pop();
			}
			switch(t[j]) {
				case -1 : {
					if(q[ans1] &amp; q[ans2])zjx[ans1]=zjx[ans2]=1;
					if(q[ans1] &amp; !q[ans2])zjx[ans2]=1;
					if(q[ans2] &amp;!q[ans1])zjx[ans1]=1;
					ans1=((q[ans1] &amp;q[ans2])?100001:100002);
					
					break;
				}
				case -2 : {
					if(q[ans1] &amp;q[ ans2])zjx[ans1]=zjx[ans2]=0;
					else if(q[ans1]&amp; !q[ans2])zjx[ans1]=1;
					else if(q[ans2]&amp; !q[ans1])zjx[ans2]=1;
					ans1=((q[ans1 ]| q[ans2])?100001:100002);

					break;
				}
				default: {
					ans1=ans1;
					if(ans1!=100001 and ans1!=100002)q[ans1]=!q[ans1];
					else ans1=(ans1==100001?100002 :100001);
					break;
				}
			}
			zh.push(ans1);
		}
	}
	int djx=q[zh.top()];
	cin&gt;&gt;z;
	for(int i=1;i&lt;=n;++i)cout&lt;&lt;zjx[i]&lt;&lt;' ';
	for(int i=1; i&lt;=z; ++i) {
		cin&gt;&gt;l;
		if(zjx[l])cout&lt;&lt;(!djx)&lt;&lt;endl;
		else cout&lt;&lt;djx&lt;&lt;endl;
	}
	return 0;
}
// Ta&amp;Shan?Zhi@Shi%
</code></pre>
<h3 id="赛后">赛后</h3>
<pre><code>#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef long long LL;
const int INF = 0x3f3f3f3f;
const LL mod = 1e9 + 7;
const int N = 1000005;

char s[N];
int a[N];
int son[N][2], ck;
int flag[N], c[N];
int n, q;
int dfs(int u, int g) {
    a[u] ^= g;
    if (u &lt;= n) {
        return a[u];
    }
    int x = dfs(son[u][0], g ^ flag[son[u][0]]);
    int y = dfs(son[u][1], g ^ flag[son[u][1]]);
    if (a[u] == 2) {
        if (x == 0) c[son[u][1]] = 1;
        if (y == 0) c[son[u][0]] = 1;
        return x &amp; y;
    } else {
        if (x == 1) c[son[u][1]] = 1;
        if (y == 1) c[son[u][0]] = 1;
        return x | y;
    }
}
void dfs2(int u) {
    if (u &lt;= n) return;
    c[son[u][0]] |= c[u];
    c[son[u][1]] |= c[u];
    dfs2(son[u][0]);
    dfs2(son[u][1]);
}
int main() {
    // freopen(&quot;expr.in&quot;, &quot;r&quot;, stdin);
    // freopen(&quot;expr.out&quot;, &quot;w&quot;, stdout);
    gets(s);
    scanf(&quot;%d&quot;, &amp;n);
    ck = n;
    for (int i = 1; i &lt;= n; i++) {
        scanf(&quot;%d&quot;, &amp;a[i]);
    }
    stack&lt;int&gt; b;
    for (int i = 0; s[i]; i += 2) {
        if (s[i] == 'x') {
            int x = 0;
            i++;
            while (s[i] != ' ') {
                x = x * 10 + s[i] - '0';
                i++;
            }
            i--;
            b.push(x);
        } else if (s[i] == '&amp;') {
            int x = b.top();
            b.pop();
            int y = b.top();
            b.pop();
            b.push(++ck);
            a[ck] = 2;
            son[ck][0] = x;
            son[ck][1] = y;
        } else if (s[i] == '|') {
            int x = b.top();
            b.pop();
            int y = b.top();
            b.pop();
            b.push(++ck);
            a[ck] = 3;
            son[ck][0] = x;
            son[ck][1] = y;
        } else if(s[i] == '!'){
            flag[b.top()] ^= 1;
        }
    }
    int ans = dfs(ck, flag[ck]);
    dfs2(ck);
    scanf(&quot;%d&quot;, &amp;q);
    while (q--) {
        int x;
        scanf(&quot;%d&quot;, &amp;x);
        printf(&quot;%d\n&quot;, c[x] ? ans : !ans);
    }
    return 0;
}
</code></pre>
<h2 id="t4">t4</h2>
<h3 id="赛时20pts">赛时（20pts）</h3>
<p><s>变量名很皮（都是大佬的名字）</s></p>
<pre><code>#include&lt;bits/stdc++.h&gt;

using namespace std;
int xty[1005][1005];
int zjx=-0x3f3f3f3f;
bool djx[1005][1005];
int n,m;
int jht;
void dfs(int zkx,int szq,int jht){
	if(zkx&lt;1 || zkx&gt;n ||szq&lt;1 ||szq&gt;m)return;
	if(djx[zkx][szq])return ;
	if(zkx==n &amp;&amp; szq==m){
		zjx=max(zjx,jht);
		return;
	}
	djx[zkx][szq]=1;
	dfs(zkx-1,szq,jht+xty[zkx-1][szq]);
	dfs(zkx+1,szq,jht+xty[zkx+1][szq]);
	dfs(zkx,szq+1,jht+xty[zkx][szq+1]);
	djx[zkx][szq]=0;
}
int main(){
//	freopen(&quot;number.in&quot;,&quot;r&quot;,stdin);
//	freopen(&quot;number.out&quot;,&quot;w&quot;,stdout);
	cin&gt;&gt;n&gt;&gt;m;
	for(int i=1;i&lt;=n;++i){
		for(int j=1;j&lt;=m;++j){
			cin&gt;&gt;xty[i][j];
			if(xty[i][j]&gt;=0)jht+=xty[i][j];
		}
	}
	if(n*m&lt;=35)dfs(1,1,xty[1][1]);
	else{
		cout&lt;&lt;jht;
	}
	cout&lt;&lt;zjx;
	return 0;
}



</code></pre>
<h3 id="赛后-2">赛后：</h3>
<pre><code>#include &lt;bits/stdc++.h&gt;
using namespace std;
long long n,m,a[1002][1002];
long long f[1002][1002][3];
int main() {
	ios::sync_with_stdio(0);
	cin&gt;&gt;n&gt;&gt;m;
	memset(f,-0x3f,sizeof f);
	for (int i=1; i&lt;=n; ++i)
		for (int j=1; j&lt;=m; ++j) {
			cin&gt;&gt;a[i][j];
		}
	f[1][1][0]=a[1][1];
	for (int i=2; i&lt;=n; ++i) f[i][1][0]=f[i-1][1][0]+a[i][1];
	for (int j=2; j&lt;=m; ++j) {
		f[1][j][1]=f[1][j-1][0]+a[1][j];
		f[n][j][2]=f[n][j-1][0]+a[n][j];
		for (int i=2; i&lt;=n; ++i) {
			f[i][j][1]=max(f[i][j-1][0],f[i-1][j][1])+a[i][j];
		}
		for (int i= n-1; i&gt;0; i--){
			f[i][j][2]=max(f[i][j-1][0],f[i+1][j][2])+a[i][j];
		}
		for (int i=1; i&lt;=n; ++i){
			f[i][j][0]=max(f[i][j][1],f[i][j][2]);
		}
	}
	cout&lt;&lt;f[n][m][0];
	return 0;
}
</code></pre>
<h1 id="csp-s">csp-s</h1>
<h2 id="t1-2">t1</h2>
<h3 id="赛时70pts">赛时（70pts）</h3>
<pre><code>#include&lt;bits/stdc++.h&gt;

using namespace std;
int T;
int n;
int day ,year,month;
int db[13]= {0,31,28,31,30,31,30,31,31,30,31,30,31};
inline bool check(int q) {
	if(q&gt;0) {
		if(q&gt;1582) {
			if(((q%4==0) &amp;&amp; q%100) || (q%400==0))return 1;
			else return 0;
		} else {
			if(!(q%4))return 1;
			else return 0;
		}
	}
	++q;
	q=-q;
	if(!(q%4))return 1;
	else return 0;
}
struct P {
	int y;
	short m,d;
} pf[10000006];
int main() {

// 	freopen(&quot;julian.in&quot;,&quot;r&quot;,stdin);
// 	freopen(&quot;julian.out&quot;,&quot;w&quot;,stdout);
	cin&gt;&gt;T;
	day=month=1;
	year=-4713;
	db[2]=29;
	for(int i=1; i&lt;=10000000; ++i) {
		++day;
		if(day&gt;db[month]) {
			++month;
			day=1;
		}
		if(month&gt;12) {
			++year;
			if(!year) {
				++year;
			}
			if(check(year))db[2]=29;
			else db[2]=28;
			month=1;
		}
		if(year==1582 &amp;&amp; month==10 &amp;&amp; day==5) {
			day=15;
		}
		pf[i].d =day;
		pf[i].m =month;
		pf[i].y =year;
	}
	while(T--) {
		scanf(&quot;%d&quot;,&amp;n);
		cout&lt;&lt;pf[n].d &lt;&lt;' '&lt;&lt;pf[n].m &lt;&lt;' '&lt;&lt;abs(pf[n].y )&lt;&lt;(pf[n].y &gt;0?&quot; &quot;:&quot; BC&quot;)&lt;&lt;endl;

	}



	return 0;
}


//(ke2YI0gong2YU0)

</code></pre>
<h3 id="赛后-3">赛后</h3>
<pre><code>include&lt;bits/stdc++.h&gt;
#define ll long long
#define int long long //重要 
#define gc getchar
using namespace std;
inline ll read(){
    ll x=0,f=1;char ch=gc();
    while (!isdigit(ch)){if (ch=='-') f=-1;ch=gc();}
    while (isdigit(ch)){x=x*10ll+ch-'0';ch=gc();}
    return x*f;
}
const int mon[13]={0,31,28,31,30,31,30,31,31,30,31,30,31};
const int rmon[13]={0,31,29,31,30,31,30,31,31,30,31,30,31};
struct que{
    int t,id;
}q[1010101];
struct QWQ{
    int y,m,d;
}ori,tmp,ans[101010],X[300001];
int Q,mx,cnt; 
inline bool cmp(que a,que b){return a.t&lt;b.t;}
inline int mabs(int x){return (x&gt;0?x:-x);}
inline bool isr(QWQ a){
    if (a.y&lt;0) return (-a.y-1)%4==0;
    if (a.y&gt;=1582) return a.y%400==0||(a.y%4==0&amp;&amp;a.y%100);
    if (a.y%4==0) return 1;
    return 0;
}
inline QWQ nextday(QWQ a){ //分类讨论 
    QWQ ans=a;
    if (a.y==1582){
        if (a.m==12&amp;&amp;a.d==31) ans.y++,ans.d=1,ans.m=1;
        else if (a.m==10&amp;&amp;a.d==4) ans.d=15;
        else if (a.d==mon[a.m]) ans.d=1,ans.m++;
        else ans.d++;
        return ans;
    }
    if (a.y==-1&amp;&amp;a.m==12&amp;&amp;a.d==31) ans.y=1,ans.d=1,ans.m=1;    
    else if (isr(a)){
        if (a.m==12&amp;&amp;a.d==31) ans.y++,ans.d=1,ans.m=1;
        else if (a.d==rmon[a.m]) ans.d=1,ans.m++;
        else ans.d++;
    }else{
        if (a.m==12&amp;&amp;a.d==31) ans.y++,ans.d=1,ans.m=1;
        else if (a.d==mon[a.m]) ans.d=1,ans.m++;
        else ans.d++;
    }
    return ans;
}
signed main(){
    ori.y=-4713,ori.m=1,ori.d=1,cnt=-1;
    Q=read();
    for (int i=1;i&lt;=Q;i++) q[i].id=i,q[i].t=read();
    sort(q+1,q+1+Q,cmp);
    tmp=ori;
    for (int i=1;i&lt;=Q;i++){
        if (q[i].t&gt;=2451545) break;
        mx=i; 
    }
    for (int i=1,now=0;i&lt;=mx;i++){
        for (;now!=q[i].t;now++) tmp=nextday(tmp);
        ans[q[i].id]=tmp;
    }
    tmp.d=1,tmp.m=1,tmp.y=2000;
    for (;tmp.y!=2400;) X[++cnt]=tmp,tmp=nextday(tmp);
    for (int i=mx+1;i&lt;=Q;i++){
        ans[q[i].id].d=X[(q[i].t-2451545)%146097].d;
        ans[q[i].id].m=X[(q[i].t-2451545)%146097].m;
        ans[q[i].id].y=X[(q[i].t-2451545)%146097].y+400*((q[i].t-2451545)/146097);
    }
    for (int i=1;i&lt;=Q;i++){
        printf(&quot;%lld %lld %lld&quot;,ans[i].d,ans[i].m,mabs(ans[i].y));
        if (ans[i].y&lt;0) printf(&quot; BC&quot;);
        puts(&quot;&quot;);
    }
    return 0;
}
</code></pre>
<h2 id="t2-2">t2</h2>
<pre><code>#include&lt;bits/stdc++.h&gt;
#define ull unsigned long long 
using namespace std;
long long n,m,c,k,v,y,t;
ull p,x;
int b[105];
//int x,v,y,p,ans,b[105],t;
signed main(){
	scanf(&quot;%lld%lld%lld%lld&quot;,&amp;n,&amp;m,&amp;c,&amp;k);
	for(int i = 1; i &lt;= n; i++){
		scanf(&quot;%llu&quot;,&amp;x);
		p |= x;
	}
	for(int i = 1; i &lt;= m; i++){
		scanf(&quot;%lld%lld&quot;,&amp;v,&amp;y);
		b[v] = 1;
	}
	for(int i = 0; i &lt;= k-1; i++ )
		if(((p&gt;&gt;i) &amp; 1) || !b[i]) t++;
	if(t &lt;= 63) printf(&quot;%llu\n&quot;,(1ull &lt;&lt; t) - n);
	else{
		n == 0 ?puts(&quot;18446744073709551616&quot;):printf(&quot;%llu\n&quot;,(((1ull&lt;&lt;63) - 1) | (1ull &lt;&lt; 63)) - (ull)(n-1));
	}
	return 0;
}
</code></pre>
<h2 id="t3-2">t3</h2>
<pre><code>#include &lt;bits/stdc++.h&gt;
using namespace std;

#define ll long long
inline ll read(){
	ll x=0,sign=0; char s=getchar();
	while(s&gt;'9'||s&lt;'0')sign|=s=='-',s=getchar();
	while(s&lt;='9'&amp;&amp;s&gt;='0')x=(x&lt;&lt;1)+(x&lt;&lt;3)+s-'0',s=getchar();
	return sign?-x:x;
}

const int N=1e5+5;
const int mod=998244353;

int n,m,c,a[N],deg[N],func[N];
int tp[N],pos[N],val[N];
ll mu=1,mul[N],dp[N],add[N];
vector &lt;int&gt; e[N];
queue &lt;int&gt; q;

bool vis[N];
void dfs(int id){
	vis[id]=1,mul[id]=(tp[id]==2?val[id]:1);
	for(int it:e[id]){
		if(!vis[it])dfs(it);
		mul[id]=mul[id]*mul[it]%mod;
	}
}

int main(){
	n=read(); for(int i=1;i&lt;=n;i++)a[i]=read();
	m=read();
	for(int i=1;i&lt;=m;i++){
		tp[i]=read();
		if(tp[i]==1)pos[i]=read(),val[i]=read();
		else if(tp[i]==2)val[i]=read();
		else{
			c=read();
			while(c--){
				int to=read();
				e[i].push_back(to),deg[to]++;
			}
		}
	} c=read();
	for(int i=1;i&lt;=m;i++)if(!vis[i]&amp;&amp;!deg[i])dfs(i);
	for(int i=1;i&lt;=c;i++)func[i]=read();
	for(int i=c,f=func[i];i;i--,f=func[i]){
		if(tp[f]==1)dp[f]=(dp[f]+mu);
		else if(tp[f]==2)mu=mu*val[f]%mod;
		else dp[f]=(dp[f]+mu),mu=mu*mul[f]%mod;
	} for(int i=1;i&lt;=m;i++)if(!deg[i])q.push(i);
	while(!q.empty()){
		int t=q.front(); q.pop();
		if(tp[t]==1)add[pos[t]]=(add[pos[t]]+dp[t]*val[t])%mod;
		ll z=dp[t]; reverse(e[t].begin(),e[t].end());
		for(int p:e[t]){
			deg[p]--; if(!deg[p])q.push(p);
			dp[p]=(dp[p]+z)%mod,z=z*mul[p]%mod;
		}
	} for(int i=1;i&lt;=n;i++)cout&lt;&lt;(a[i]*mu+add[i])%mod&lt;&lt;&quot; &quot;;
	return 0;
}

</code></pre>
<h2 id="t4-2">t4</h2>
<pre><code>#include&lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;algorithm&gt;
#include&lt;fstream&gt;
#include&lt;cmath&gt;
using namespace std;
#define pii pair&lt;int,int&gt;
#define mp(x,y) make_pair(x,y)
inline int read(){
	char ch=getchar();
	int res=0,f=1;
	for(;ch&lt;'0'||ch&gt;'9';ch=getchar())if(ch=='-')f=-1;
	for(;ch&gt;='0'&amp;&amp;ch&lt;='9';ch=getchar())res=(res&lt;&lt;3)+(res&lt;&lt;1)+(ch-'0');
	return res*f;
}
const int MAXN=1e6+5,inf=1e9;
int t,n,a[MAXN];
pii q1[MAXN],q2[MAXN];//q1单调递增，q2单调递减
int l1,r1,l2,r2;//首尾指针
inline pii mx(){//取出最大值且弹出
	if(r1==l1)return q2[l2++];
	else if(r2==l2)return q1[--r1];
	else if(q2[l2]&gt;q1[r1-1])return q2[l2++];
	else return q1[--r1];
}
inline pii mn(){//取出最小值并弹出
	if(l1==r1)return q2[--r2];
	else if(r2==l2)return q1[l1++];
	else if(q2[r2-1]&lt;q1[l1])return q2[--r2];
	else return q1[l1++];
}
inline pii M_min(pii x,pii y){
	return x&lt;y?x:y;
}
inline void solve(){
	l1=r1=l2=r2=0;
	for(int i=1;i&lt;=n;++i)q1[r1++]=mp(a[i],i);//初始化
	int fl=0,cnt=0,alf=0;
	while(1){
		++cnt;//计数器，同时也是死掉的蛇数
		pii x=mn(),y=mx();
		pii z=M_min((l1&lt;r1?q1[l1]:mp(inf,-inf)),(l2&lt;r2?q2[r2-1]:mp(inf,-inf)));//再取出一个最小值
		y.first-=x.first;
		if(y&gt;z||cnt==n-1){//Case2和边界写一起了
			if(fl){
				printf(&quot;%d\n&quot;,n-(fl-(alf&amp;1)));//奇偶性
				return ;
			}
			if(cnt==n-1){
				printf(&quot;1\n&quot;);
				return ;
			}
			q2[r2++]=y;//压入队列
		}
		else {
			alf++;//记录层数
			if(!fl)fl=cnt;	//第一个开始“冒风险”的蛇的之前死了多少
			q2[r2++]=y;//压入队列
		}
	}
}
int main(){
	t=read()-1;
	n=read();
	for(int i=1;i&lt;=n;++i)a[i]=read();
	solve();
	while(t--){
		int k=read();
		for(int i=1,x;i&lt;=k;++i)x=read(),a[x]=read();
		solve();
	}
	return 0;
}
</code></pre>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://wyyszl.github.io/tag/AmDYNAVx8/" class="tag">
                    OI
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://wyyszl.github.io/post/wen-yan/">
                  <h3 class="post-title">
                    文言
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>






  </body>
</html>
